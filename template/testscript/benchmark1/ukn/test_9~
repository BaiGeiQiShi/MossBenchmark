#!/bin/bash

BIN=$1
OUTDIR=$2
TIMEOUT=$3
INDIR=$4

function outputcheck() {
  r="$1"
  if grep -q -E "$r" $OUTDIR/o9; then
    echo 1 &>>$OUTDIR/o9
    return 1
  fi
    echo 0 &>>$OUTDIR/o9
    return 0
}

timeout ${TIMEOUT}s $BIN notexist  &>$OUTDIR/o9
retval=$?
outputcheck "missing operand after \`notexist'"
if [[ $retval -eq 124 ]]; then
    echo 1 &>>$OUTDIR/o9
elif [[ $retval -gt 128 ]]; then
    echo 1 &>>$OUTDIR/o9
else
    echo 0 &>>$OUTDIR/o9
fi
